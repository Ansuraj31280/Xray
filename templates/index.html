<!DOCTYPE html>
<html>
<head>
    <title>Xray-Image Analysis</title>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}">

</head>
<script>
    var loadFile = function(event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
<body>
    <div class="content">
        <div class="header">
            <h1>Chest X-Ray Scanner</h1>
            <p>A go-to aid identifying diseases based on chest x-ray image analysis</p>
        </div>
        <div class="row">
            <div class="side">
                <h2>About us</h2>
                <p>
                    A X-ray scanning model trained for efficient and quick analysis of uploaded scans to check for various diseases including Covid-19, Tuberculousis and Pneumonia. 
                    Along with calculated probability for the occurrence of the said disease.
                </p>
                <img src="static/xray.jpg" class="side-img">
                <h2>Developed by:</h2>
                <p>
                    Arjun Basandrai <br> Ansu Raj <br> Dhriti Parikh <br> Prabhav Srivastava
                </p>

            </div>
            <div class="main">
                <h2 class="sub-heads">Scanning</h2>
                <form method="post" action="/" enctype="multipart/form-data">
                    
                    <p>
                        {% with messages = get_flashed_messages() %}
                    </p>

                    <div class="upload-area">
                        <label for="file" class="upload-btn">Upload image</label>
                        <input id="file"  type="file" name="file" autocomplete="off" onchange="loadFile(event)"  required >
                        <img id="output" src="{{ messages[3] }}" width="300px" alt="">
                    </div>
                   
                    <p>
                        <input type="submit" class="submit" value="Analyze">
                    </p>
                </form>
                <p>
                    {% if messages %}
                </p>
                <h2 class="sub-heads">Result</h2>
                <p>
                    {% if messages[0] != "NORMAL" %}
                </p>
                <div style="background: #f1f1f1; padding:20px;">
                    
                    <p style="text-align:left;">
                        The person probably has {{ messages[0] }}
                        <br>
                        Probability: {{ messages[1] }}%</p>
                    <div style="width:100%; height:20px; border: 1px solid #ececec;background:#c6c6c6;margin:10px 0;border-radius: 5px;">
                        <div style="width: calc({{ messages[1] }}% - 5px) ;height:20px; background:#15374D;border-radius: 5px;"></div>
                    </div>
                </div>
                <p style="margin:10px 0;text-align:left;">
                    About {{ messages[0] }}: <br>
                    {{ messages[2] }}
                </p>
                <p>
                    {% else %}
                    <div style="background: #f1f1f1; padding:20px;">
                    
                        <p style="font-size: 20px;">
                            No disease detected!
                    </div>
                    {% endif %}
                    {% endif %}
                    {% endwith %}
                </p>
            </div>
            <div class="side1">
                <h2>About us</h2>
                <p>A X-ray scanning model trained for efficient and quick analysis of uploaded scans to check for various diseases including Covid-19, Tuberculousis and Pneumonia. 
                    Along with calculated probability for the occurrence of the said disease.
                </p>
                <img src="static/xray.jpg" class="side-img">
                <h2>Developed by:</h2>
                <p>
                    Arjun Basandrai <br> Ansu Raj <br> Dhriti Parikh <br> Prabhav Srivastava
                </p>

            </div>
        </div>
        <footer>
            <p>Copyright &#169; 2022 CodeChef Ideathon Team 19. All Rights Reserved</p>
        </footer>
    </div>
</body>
</html>